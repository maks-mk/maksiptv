# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞ os –≤ add_playlist()

## –í–µ—Ä—Å–∏—è 0.13.1 - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ UnboundLocalError

### üö® **–ü—Ä–æ–±–ª–µ–º–∞:**

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ø–ª–µ–π–ª–∏—Å—Ç–∞ –∏–∑ —Ñ–∞–π–ª–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞:

```
Traceback (most recent call last):
  File "main.py", line 261, in <lambda>
    add_button.clicked.connect(lambda: self.add_playlist(dialog, tabs.currentIndex()))
  File "main.py", line 295, in add_playlist
    if not os.path.exists(file_path):
           ^^
UnboundLocalError: cannot access local variable 'os' where it is not associated with a value
```

### üîç **–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**

#### **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏:**
–í –º–µ—Ç–æ–¥–µ `add_playlist()` –º–æ–¥—É–ª—å `os` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö:

1. **–†–∞–Ω–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** (—Å—Ç—Ä–æ–∫–∞ 295):
```python
if not os.path.exists(file_path):  # ‚ùå os –µ—â–µ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
```

2. **–õ–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç** (—Å—Ç—Ä–æ–∫–∞ 306):
```python
import os  # ‚úÖ –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–∑–∂–µ
default_name = os.path.splitext(os.path.basename(file_path))[0]
```

#### **–ü—Ä–æ–±–ª–µ–º–∞ Python:**
Python –≤–∏–¥–∏—Ç, —á—Ç–æ `os` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ—ç—Ç–æ–º—É —Å—á–∏—Ç–∞–µ—Ç –µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –ù–æ –ø–æ–ø—ã—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `os` –¥–æ –µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ `UnboundLocalError`.

### ‚úÖ **–†–µ—à–µ–Ω–∏–µ:**

#### **–ü–µ—Ä–µ–Ω–æ—Å –∏–º–ø–æ—Ä—Ç–∞ –≤ –Ω–∞—á–∞–ª–æ –º–µ—Ç–æ–¥–∞:**

**–î–æ (–æ—à–∏–±–æ—á–Ω—ã–π –∫–æ–¥):**
```python
def add_playlist(self, dialog, tab_index):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏"""
    if tab_index == 0:  # –§–∞–π–ª
        file_path = self.file_path_edit.text().strip()
        if not file_path:
            QMessageBox.warning(dialog, "–û—à–∏–±–∫–∞", "–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –ø–ª–µ–π–ª–∏—Å—Ç–∞")
            return
        if not os.path.exists(file_path):  # ‚ùå –û–®–ò–ë–ö–ê: os –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
            QMessageBox.warning(dialog, "–û—à–∏–±–∫–∞", "–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω")
            return

        # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞
        file_name = self.file_name_edit.text().strip()
        if file_name:
            self.parent.playlist_names[file_path] = file_name
        else:
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            import os  # ‚úÖ –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–¥–µ—Å—å, –Ω–æ —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ
            default_name = os.path.splitext(os.path.basename(file_path))[0]
            self.parent.playlist_names[file_path] = default_name
```

**–ü–æ—Å–ª–µ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥):**
```python
def add_playlist(self, dialog, tab_index):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≤–∫–ª–∞–¥–∫–∏"""
    import os  # ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º os –≤ –Ω–∞—á–∞–ª–µ –º–µ—Ç–æ–¥–∞
    
    if tab_index == 0:  # –§–∞–π–ª
        file_path = self.file_path_edit.text().strip()
        if not file_path:
            QMessageBox.warning(dialog, "–û—à–∏–±–∫–∞", "–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –ø–ª–µ–π–ª–∏—Å—Ç–∞")
            return
        if not os.path.exists(file_path):  # ‚úÖ –¢–µ–ø–µ—Ä—å os –¥–æ—Å—Ç—É–ø–µ–Ω
            QMessageBox.warning(dialog, "–û—à–∏–±–∫–∞", "–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω")
            return

        # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞
        file_name = self.file_name_edit.text().strip()
        if file_name:
            self.parent.playlist_names[file_path] = file_name
        else:
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            default_name = os.path.splitext(os.path.basename(file_path))[0]  # ‚úÖ os —É–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω
            self.parent.playlist_names[file_path] = default_name
```

### üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:**

#### **–û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –≤ Python:**
1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç** - –º–æ–¥—É–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω –≤–æ –≤—Å–µ–π —Ñ—É–Ω–∫—Ü–∏–∏
2. **–õ–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç** - –º–æ–¥—É–ª—å –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç** - –µ—Å–ª–∏ –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç, Python —Å—á–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ª–æ–∫–∞–ª—å–Ω–æ–π –≤–æ –≤—Å–µ–π —Ñ—É–Ω–∫—Ü–∏–∏

#### **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã:**
1. **–ò–º–ø–æ—Ä—Ç –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞** (–ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç):
```python
import os  # –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞

def add_playlist(self, dialog, tab_index):
    if not os.path.exists(file_path):  # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
```

2. **–ò–º–ø–æ—Ä—Ç –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏** (–Ω–∞—à —Å–ª—É—á–∞–π):
```python
def add_playlist(self, dialog, tab_index):
    import os  # –í –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏
    if not os.path.exists(file_path):  # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
```

3. **–ò–∑–±–µ–≥–∞—Ç—å** –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

#### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚ùå **UnboundLocalError** –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –ø–ª–µ–π–ª–∏—Å—Ç–∞
- ‚ùå **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å** —Ñ—É–Ω–∫—Ü–∏—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
- ‚ùå **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞** –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

#### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- ‚úÖ **–§—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
- ‚úÖ **–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã** –∏–∑ —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞** —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π** —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

### üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

#### **–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–µ–π–ª–∏—Å—Ç:**
```m3u
#EXTM3U
#EXTINF:-1,–¢–µ—Å—Ç–æ–≤—ã–π –∫–∞–Ω–∞–ª 1
http://example.com/stream1.m3u8
#EXTINF:-1,–¢–µ—Å—Ç–æ–≤—ã–π –∫–∞–Ω–∞–ª 2
http://example.com/stream2.m3u8
#EXTINF:-1,–¢–µ—Å—Ç–æ–≤—ã–π –∫–∞–Ω–∞–ª 3
http://example.com/stream3.m3u8
```

#### **–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
1. ‚úÖ **–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** - –±–µ–∑ –æ—à–∏–±–æ–∫
2. ‚úÖ **–û—Ç–∫—Ä—ã—Ç–∏–µ –¥–∏–∞–ª–æ–≥–∞** –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–ª–µ–π–ª–∏—Å—Ç–∞
3. ‚úÖ **–í—ã–±–æ—Ä —Ñ–∞–π–ª–∞** —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–û–±–∑–æ—Ä"
4. ‚úÖ **–ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è** –ø–ª–µ–π–ª–∏—Å—Ç–∞
5. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞** –±–µ–∑ –æ—à–∏–±–æ–∫

### üéØ **–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ —É—Ä–æ–∫–∏:**

#### **–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏–º–ø–æ—Ä—Ç–∞:**
1. **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª–∏ –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞** –∫–æ–≥–¥–∞ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ
2. **–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç** - —Ä–∞–∑–º–µ—â–∞—Ç—å –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏
3. **–ò–∑–±–µ–≥–∞—Ç—å –∏–º–ø–æ—Ä—Ç–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ —Ñ—É–Ω–∫—Ü–∏–∏** –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª—è
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø—É—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** –∫–æ–¥–∞

#### **–û—Ç–ª–∞–¥–∫–∞ –ø–æ–¥–æ–±–Ω—ã—Ö –æ—à–∏–±–æ–∫:**
1. **–ò—Å–∫–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã** –≤ —Ñ—É–Ω–∫—Ü–∏–∏
2. **–ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
3. **–ü–æ–Ω–∏–º–∞—Ç—å –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏** Python
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IDE** –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è —Ç–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º

### üîÆ **–ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤ –±—É–¥—É—â–µ–º:**

1. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ pylint, flake8
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–µ—Ç–æ–∫** –∫–æ–¥–∞
3. **Code review** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
4. **IDE –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è** - –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –ø–æ–¥—Å–≤–µ—Ç–∫–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

–û—à–∏–±–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –∏ —Ç–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å –ø–ª–µ–π–ª–∏—Å—Ç—ã –∏–∑ —Ñ–∞–π–ª–æ–≤ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏!
